[tox]
envlist = py36,py37
skipsdist = True

[gh-actions]
python =
    3.6: py36-coveralls
    3.7: py37-coveralls-flake8

[testenv]
passenv = TRAVIS TRAVIS_*
deps =
    -r requirements.txt
    coveralls: coveralls
    flake8: flake8
commands =
    python -m pytest {posargs}
    flake8: flake8 --exit-zero --exclude=src/csbot/plugins_broken src/ tests/
    # Try to run coveralls, but don't fail if coveralls fails
    coveralls: - coveralls
